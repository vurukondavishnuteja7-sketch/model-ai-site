<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model AI</title>

  <style>
    body { margin: 0; font-family: Inter, Arial, sans-serif; background: #f6f7fb; display: flex; height: 100vh; }

    .sidebar { width: 250px; background: #ffffff; border-right: 1px solid #e5e7eb; padding: 12px; display:flex; flex-direction:column; }

    .new-btn { width: 100%; padding: 10px; background: #16a34a; color: white; border: none; border-radius: 10px; cursor: pointer; margin-bottom: 10px; font-weight: 600; }

    #history div { padding: 8px; border-radius: 8px; cursor: pointer; font-size: 14px; }
    #history div:hover { background: #f3f4f6; }

    .main { flex: 1; display: flex; flex-direction: column; }

    .topbar { padding: 12px 20px; background: white; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; font-weight: 600; }

    #chat { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 14px; }

    .msg { max-width: 760px; }
    .user { align-self: flex-end; }
    .bot { align-self: flex-start; }

    .bubble { padding: 12px 16px; border-radius: 16px; background: white; border: 1px solid #e5e7eb; white-space: pre-wrap; }
    .user .bubble { background: #16a34a; color: white; border: none; }

    .input-wrap { padding: 16px; display: flex; justify-content: center; }

    .input-box { width: 100%; max-width: 900px; background: white; border: 1px solid #e5e7eb; border-radius: 24px; display: flex; align-items:center; gap: 8px; padding: 10px; box-shadow:0 4px 12px rgba(0,0,0,0.05); }

    input[type="text"] { flex: 1; border: none; outline: none; font-size: 15px; }

    .icon-btn { background: #f3f4f6; border: none; padding: 8px 10px; border-radius: 10px; cursor: pointer; }

    button.send { background: #16a34a; color: white; border: none; padding: 10px 16px; border-radius: 12px; cursor: pointer; font-weight:600; }

    img.ai { max-width: 220px; border-radius: 12px; margin-top: 8px; border: 1px solid #e5e7eb; }

    .file { margin-top:8px; font-size:13px; color:#2563eb; }
  </style>
</head>

<body>
  <div class="sidebar">
    <button class="new-btn" onclick="newChat()">+ New Chat</button>
    <div id="history"></div>
  </div>

  <div class="main">
    <div class="topbar">Model AI Assistant</div>

    <div id="chat"></div>

    <div class="input-wrap">
      <div class="input-box">
        <input type="file" id="fileInput" hidden />
        <button class="icon-btn" onclick="document.getElementById('fileInput').click()">ðŸ“Ž</button>
        <button class="icon-btn" onclick="startVoice()">ðŸŽ¤</button>
        <input id="q" placeholder="Ask anything or type: image of sunset beach" />
        <button class="send" onclick="ask()">Send</button>
      </div>
    </div>
  </div>

  <script>
    const chat = document.getElementById("chat");
    const history = document.getElementById("history");

    function addMessage(text, type, images = [], fileName = null) {
      const wrap = document.createElement("div");
      wrap.className = "msg " + type;

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.innerText = text;
      wrap.appendChild(bubble);

      if (fileName) {
        const f = document.createElement("div");
        f.className = "file";
        f.innerText = "ðŸ“„ " + fileName;
        wrap.appendChild(f);
      }

      images.forEach(src => {
        const img = document.createElement("img");
        img.src = src;
        img.className = "ai";
        wrap.appendChild(img);
      });

      chat.appendChild(wrap);
      chat.scrollTop = chat.scrollHeight;
    }

    function saveHistory(q) {
      const item = document.createElement("div");
      item.innerText = q;
      item.onclick = () => (document.getElementById("q").value = q);
      history.appendChild(item);
    }

    function newChat() { chat.innerHTML = ""; }

    // FILE UPLOAD
    document.getElementById("fileInput").addEventListener("change", function () {
      const file = this.files[0];
      if (!file) return;
      addMessage("File uploaded", "user", [], file.name);
    });

    // VOICE INPUT
    function startVoice() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) return alert("Voice not supported");

      const recog = new SpeechRecognition();
      recog.lang = "en-US";
      recog.start();

      recog.onresult = e => {
        document.getElementById("q").value = e.results[0][0].transcript;
      };
    }

    async function ask() {
      const q = document.getElementById("q").value.trim();
      if (!q) return;

      addMessage(q, "user");
      saveHistory(q);
      document.getElementById("q").value = "";

      // IMAGE MODE
      if (q.toLowerCase().startsWith("image of")) {
        const prompt = q.replace("image of", "").trim();
        const imgs = [];

        for (let i = 0; i < 6; i++) {
          imgs.push(`https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?seed=${i}`);
        }

        addMessage("Generated images:", "bot", imgs);
        return;
      }

      // DEMO AI TEXT
      addMessage("Thinking...", "bot");

      setTimeout(() => {
        chat.lastChild.remove();
        addMessage("This is Model AI smart reply. Real AI API connect chesthe inka powerful avutundi.", "bot");
      }, 900);
    }
  </script>
</body>
</html>
