<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Model AI</title>
<style>
body{margin:0;font-family:Arial;display:flex;height:100vh;background:#f5f5f5}
.sidebar{width:240px;background:#fff;border-right:1px solid #ddd;padding:10px}
.main{flex:1;display:flex;flex-direction:column}
.chat{flex:1;overflow:auto;padding:20px}
.msg{max-width:70%;padding:10px;border-radius:10px;margin:8px 0}
.user{background:#10a37f;color:#fff;margin-left:auto}
.bot{background:#eaeaea}
.input{display:flex;padding:10px;border-top:1px solid #ddd;background:#fff}
input{flex:1;padding:10px}
button{margin-left:8px;padding:10px}
</style>
</head>
<body>

<div class="sidebar">
<button onclick="login()">Login</button>
<button onclick="logout()">Logout</button>
</div>

<div class="main">
<div id="chat" class="chat"></div>

<div class="input">
<input id="q" placeholder="Ask anything...">
<button onclick="ask()">Send</button>
<button onclick="voice()">ðŸŽ¤</button>
</div>
</div>

<script>
const chat = document.getElementById("chat")

function add(text,cls){
const d=document.createElement("div")
d.className="msg "+cls
d.textContent=text
chat.appendChild(d)
chat.scrollTop=chat.scrollHeight
}

async function ask(){
const q=document.getElementById("q").value
if(!q) return
add(q,"user")

// IMAGE MODE
if(q.startsWith("image ")){
const img=document.createElement("img")
img.src=`https://image.pollinations.ai/prompt/${q.slice(6)}`
img.style.maxWidth="200px"
chat.appendChild(img)
return
}

add("Thinking...","bot")

const r=await fetch("/api/chat",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({message:q})
})

const d=await r.json()
chat.lastChild.remove()
add(d.reply,"bot")
}

async function login(){
await fetch("/api/login",{method:"POST"})
alert("Logged in")
}

async function logout(){
await fetch("/api/login?logout=1")
alert("Logged out")
}

// VOICE
function voice(){
const r=new webkitSpeechRecognition()
r.onresult=e=>{document.getElementById("q").value=e.results[0][0].transcript}
r.start()
}
</script>

</body>
</html>
